<!DOCTYPE html>
<html>
<head>
    <title>Performance Optimization</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <link type="text/css" rel="stylesheet" href="../assets/css/base.css" />
    <link type="text/css" rel="stylesheet" href="../assets/css/shCore.css" />
    <link type="text/css" rel="stylesheet" href="../assets/css/shThemeDefault.css" />
    <script type="text/javascript" src="../assets/js/lib/shCore.js"></script>
    <script type="text/javascript" src="../assets/js/lib/shBrushJScript.js"></script>
    <script type="text/javascript" src="../assets/js/lib/shBrushBash.js"></script>
    <script type="text/javascript" src="../assets/js/lib/shAutoloader.js"></script>
    <script type="text/javascript">
        SyntaxHighlighter.all();
    </script>
</head>
<body>
    <header>

        <img class="epam-logo" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAAAUCAYAAAAa2LrXAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0QjQwQjM1QzI4NzQxMUU0QjAzOUUxRTYzMjc2NDcxRiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo0QjQwQjM1RDI4NzQxMUU0QjAzOUUxRTYzMjc2NDcxRiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkY2Q0Q3M0Y1Mjg3MjExRTRCMDM5RTFFNjMyNzY0NzFGIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkY2Q0Q3M0Y2Mjg3MjExRTRCMDM5RTFFNjMyNzY0NzFGIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+ZE2tUQAABZRJREFUeNrcmHlsVFUUxl/3RaQtbaHalqUREAWNGq2IC/iHgAsKuEVj0SoxLjFqIm4RATXBfwSNGKOCEbRRKGICRAxRqixSggKmTaEtUEULlFq6TKUM0xm/q99Lbr7cmQKtJHKSX9o577zlnnu297xIJOL1ISPAYlAH2kEXaAQrwRjaTAC7QBX4EswHtSAE6sFrIMu65lhQBg6AYyAA9oAFIJ82M3jPSvATWAFW0dZcdykYBeaCw5F/ZTeY1Ns199Zh14BZII0P2BaJLs0gFzwa6VnKef3be7D7kXaLIqcnLaAQ3AkeAYmn6oN479RlJHgRbAObwZMgDF4B/S27crDd+p0NJoF0ud5GsEx0OSAFzLZ0XbRrtHTF4EqQLOd/DypEdxR8B/6ydGk8927wIajh2i44aW+cpKdHghfAFhCUXdxEm72WrgOkMzptuR+8JbrLwTDRfQWKeB1fVvA+FZauG4wD38j5yaBUdLNBAjhk6f5g9lSI7XGwDkwFKbF8kxjDt2YXbgXTwLUgLordFlAAci1dLQiB4WLbQltb/gRDRHeAkdpPoso8wzCxa5JrHgdBkCfX/J3RNsjSHQHHHGszdhPJQbAELAe/6OI1hQvBU+AHhvMCcJ3jBlXgVXAFmAVGgXOt47vBCXFgBxd2vp0AIMD7qgPHiG4XyASDLd1BOjrH0tVba7GlUZxvpI1/bwZTwGo+ty3ngZfBDrABPGhvrInAgeAOMB1MAElRIm0/WAtWMhoi4nhPomCIPHCz9UB2VAS5ARqpVdzA/XTQZWCe2B3mGrLFUUniaN/ZmhF7+beTzlvNtZSAu8ClEmzjyZvgc/CxyeOXHN0pzPZvasR7HD2SY9SCOXJ+gLUmbOnMiHE1j/mymXWpTM6fbl37QrCEI5HK+3w2WxaxrlVbOjNSFYBnxXZujDXFs74u5FqCjvtvj3eksce6MBPkg8cZusEY9TJDfp/DWhMnKZzJY76Y+tUtaW1+N/D/d1lKHmJXVtkDhjrS32Nm+dLKaC0S26YYawpzynia9fRth01CoqSiL+Zhn2FqLZdxxCW6iM9Ys3J5feO0pWC02P3GvxfJYneCheAJSz+HDiixdHUcY2zZxyaQI+XD1LaLxbauh3WZTbgN3ALGRnPgt+y0Jt8T/AMs4obnQCVnsHLupC2JstvdrBGD2b0CnA8rZU60I2CAo4HcZ+mqweuMSE+cPUh0zTIR+Hae1Eq/C6uYZjiZTpsqzdGTRvmOWfxWdlMTbfeCGY6xopi8QYcvBuu5qwNkjGgHh9iUBlrOTXcstpbRlyDOyhcn1HNjiqXMdElT8njvS0RXzXKSJR34KP83TecmcA+H/dwoTjOl5VOwilkStutfDUeTIqulBx21bhq78T52pDRxTBN3drQj2rId9arQkdapUSLVtg3wrSJPNq/VEQANrLMZcu8Ay4Q5vgY84HCeybgPOKGM4BvXz6yRzkE6bLX0fI44M6Wle4y6CRxFUiQykh31pk2aRZjD9lWOFNSo6uD9+olT0sWpLTx/qKPZFEg61vB686SE+M9qHFoGNnFjevUqZyjmOHHEauOlPNZp6UKOkWMNv5w0iN58XTkhusmODw5BxxixDNwguq18ng2iN6PQFNGZV8o867dZw1p+2cn4Lz4mmCZQyjAu4WuNn+LP251JInInx5CQpFY37ewsMPX4a55jSxJrWEQGY33+dis7tDMXOmplf6bjY3x1NY3jE+sNpUeJ++ebVt/IcDahLC6sk+G/ns4bz3nSF/O1ZD64nqlUzfGnk8fHsXyk0jHrOJpk0vEbWcMmspmk0vHb+BaRySYXYuE3NflGNo4Mzng7uIGh0110XzqwJ3kYfGT9/oIO/19L/Bm8l74F/OqdBZJ4Bu/VyXmulV2v8mxw4N8CDADXFYNPYlfknAAAAABJRU5ErkJggg=="/>

        <h1>Performance Optimization</h1>

    </header>

<!-- ================== Slides ================== -->
    <textarea id="source">


class: center, middle

.title[
Front-end training
# Performance Optimization
]

---

# 1st rule of optimization

**Premature optimization is the root of all evil!**

---

# Rules of optimization

- Only optimize the bottlenecks - parts of the system that perform insufficiently
- Sometimes optimization leads to unmaintainable code

---

# Finding performance bottlenecks

Tools for identifying performance bottlenecks:
- console.time(), console.timeEnd()
- +new Date()
- console.profile(), console.profileEnd()
- Developer Tools

---

# Profiling recommendations

- use named functions instead of anonymous ones
- make use of breakpoints in your code
- https://developer.chrome.com/devtools/docs/network and so on

---

# JS performance tips

### Cache the results of executing your functions
- Memoization - before:
<pre class="brush: jscript;">
var fibonacci = function (n) {
  return n < 2 ? n : fibonacci(n − 1) + fibonacci(n − 2);
};
</pre>
- after:
<pre class="brush: jscript;">
var fibonacci = (function (  ) {
    var memo = [0, 1];
    var fib = function (n) {
        var result = memo[n];
        if (typeof result !== 'number') {
            result = fib(n − 1) + fib(n − 2);
            memo[n] = result;
        }
        return result;
    };
    return fib;
}( ));
</pre>

---

# JS performance tips

### Make use of native methods
<pre class="brush: jscript;">
document.querySelectorAll() //always faster than Sizzle
</pre>

### Optimize your collections (refers to css selector speed):
<pre class="brush: jscript;">
$(‘#mylist li’).each(function() {})
</pre>
is slower than
<pre class="brush: jscript;">
$(‘#mylist’).find(‘li’).each(function() {})
</pre>

---

# JS performance tips

### Avoid multiple DOM element retrievals - always cache your results!
<pre class="brush: jscript;">
// Wrong:
$('#myElement').attr('class', 'my-class');
$('#myElement').attr('src', 'my-img-url.png');
</pre>
<pre class="brush: jscript;">
// Right:
var element = $('#myElement');
element.attr('class', 'my-class');
element.attr('src', 'my-img-url.png');
</pre>

### Loop optimization:
<pre class="brush: jscript;">
for ( var i = arr.length; --i; ) {
  // loop traversal if order doesn’t matter
}
</pre>

<pre class="brush: jscript;">
for ( var i = 0, l = arr.length; i < l; i++ ) {
  // loop traversal if order matters
}
</pre>

---

# Page speed optimization

Demo of https://developers.google.com/speed/pagespeed/insights/

---

# Page Speed: Reflows & Repaints

Minimize reflows and repaints as much as possible

http://www.stubbornella.org/content/2009/03/27/reflows-repaints-css-performance-making-your-javascript-slow/

https://www.youtube.com/watch?v=nJtBUHyNBxs

---

# Page Speed: Reflows & Repaints

http://www.html5rocks.com/en/tutorials/speed/html5/#toc-optimization-strategies

Read first, write after:

<pre class="brush: jscript;">
function paintSlow() {
  var left1 = $('#thing1').css('left');
  $('#otherThing1').css('left', left);
  var left2 = $('#thing2').css('left');
  $('#otherThing2').css('left', left);
}
</pre>

<pre class="brush: jscript;">
function paintFast() {
  var left1 = $('#thing1').css('left');
  var left2 = $('#thing2').css('left');
  $('#otherThing1').css('left', left);
  $('#otherThing2').css('left', left);
}
</pre>

---

# CSS preformance tips

https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Writing_efficient_CSS

Right-most selector - as specific as possible!

Make use of GPU-accelerted rendering if needed:
``` css
   -webkit-transform: translate3d(0, 0, 0);
   -moz-transform: translate3d(0, 0, 0);
   -ms-transform: translate3d(0, 0, 0);
   transform: translate3d(0, 0, 0);
```
http://ariya.ofilabs.com/2014/02/tricks-for-gpu-composited-css.html

---

# Books && links

- High Performance Javascript: http://shop.oreilly.com/product/9780596802806.do
- High Performance Websites: http://shop.oreilly.com/product/9783897218505.do
- Even Faster Websites: http://shop.oreilly.com/product/9780596522315.do
- http://superherojs.com/#performance


---

<img src="../tooling/thatsit.jpg" width="850">

---




class: center, middle


##Thanks!



    </textarea>
<!-- ================== End of Slides ================== -->

    <script src="../assets/js/remark-latest.min.js" type="text/javascript"></script>
    <script type="text/javascript">remark.create({highlightStyle: 'github'});</script>
</body>
</html>

